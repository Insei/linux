/*
 * arch/arm/boot/dts/tegra124-platforms/tegra124-mocha-sdhci.dtsi
 *
 * Copyright (c) 2018, Alexandrov Dmitry. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
 * version 2, as published by the Free Software Foundation.
 *
 * This program is distributed in the hope it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
 * more details.
 *
 */
 
#include <dt-bindings/gpio/tegra-gpio.h>

/ {
	
 	aliases {
 		sdhci0 = &sdmmc1;
		sdhci2 = &sdmmc3;
		sdhci3 = &sdmmc4;
	};
	
	/* MMC */
 	sdmmc4: sdhci@700b0600 {
		vmmc-supply = <&palmas_smps8>;
		bus_width = <8>;
		non-removable;
		max-frequency = <51000000>;
		status = "okay";
 	};
	
	/* SDcard */
	sdmmc3: sdhci@700b0400 {
		max-frequency = <41000000>;
 		power-gpios = <&gpio TEGRA_GPIO(R, 0) 0>;
 		cd-gpios = <&gpio TEGRA_GPIO(V, 2) 0>;
 		wp-inverted;
 		cd-inverted;
 		vmmc-supply = <&palmas_ldo9>;
		vqmmc-supply = <&palmas_smps9>;
		status = "okay";
	};
	
	/* Wi-Fi */
	sdmmc1: sdhci@700b0000 {
		status = "okay";
		power-gpios = <&gpio TEGRA_GPIO(X, 7) GPIO_ACTIVE_HIGH>;
		vmmc-supply = <&palmas_smps8>;
		non-removable;
		keep-power-in-suspend;

		nvidia,pad-autocal-pull-up-offset-3v3 = <0x00>;
		nvidia,pad-autocal-pull-down-offset-3v3 = <0x76>;
		nvidia,pad-autocal-pull-up-offset-1v8 = <0x76>;
		nvidia,pad-autocal-pull-down-offset-1v8 = <0x76>;
		nvidia,default-tap = <0x0>;
		nvidia,default-trim = <0x2>;
		
		pinctrl-names = "sdmmc-3v3", "sdmmc-1v8";
		pinctrl-0 = <&sdmmc1_3v3>;
		pinctrl-1 = <&sdmmc1_1v8>;
	};
};
